<title>"Hands-off" Debian Installation</title>
<h1>"Hands-off" Debian Installation</h1>

<h2>All change again: now (mostly) incorporated into debian-installer proper</h2>

<p>With luck that will be the last major rewrite of this stuff, since
I'd like to start using it, rather than constantly rewriting it.  I'm
pretty hopeful on this front, since it's now being integrated into d-i
itself, and so does not have to flit around the periphery of a
constantly changing centre.

<p>Since this is now based on Etch debian-installer, with only minor
extensions, the build procedure is pretty much exactly the same as
building vanilla d-i.

<h3>dashslashdash is no more</h3>

<p>It's no longer needed, and we've come up with some rather more
meaningful variable names to provide the same functionality

<hr>

<p>This page describes some new features of debian-installer system
that allows automated installation.  If you obtain media that supports
this, you will find that you can (for example) type something like:

<pre>
  boot: auto url=myserver cls=xen3;loc/uk
</pre>

and get a Xen3 machine installed, with a UK keyboard and timezone.

<p><b>WARNING:</b> <em>don't just blithely try this on a
machine you care about -- it will cheerfully re-partition the hard
disk, and overwrite your data, without asking for permission once
you've launched it.</em>

<h2>Parameters</h2>

<p>The slash-free parameters (like <pre>url</pre>) are actually just
aliases for normal debconf variables.  So far the following aliases
have been defined:

<pre>
auto            auto-install/enabled
cls             auto-install/classes
priority        debconf/priority
url             preseed/url
hostname        netcfg/get_hostname
domain          netcfg/get_domain
file            preseed/file
locale          debian-installer/locale
interface       netcfg/choose_interface
fb              debian-installer/framebuffer
suite		mirror/suite
</pre>

<p>by invoking the auto (or auto24) targets, you're just ensuring that
"auto=true DEBCONF_PRIORITY=critical" is added to the kernel command line.

<h3>url=<em>magic</em></h3>

<p>The auto-install.udeb package provides some magic for creating full
preseed urls from either just a hostname or a fully qualified domain
name.  If you provide a url that contains no slashes, auto-install's
postinst (which is run before network-preseed) assumes that you have
given it a hostname, and replaces it with a URL of the following form:
<pre>http://<hostname>/d-i/tags/1.0/start</pre>.  The
<pre><hostname></pre> section of that is whatever you provided as the
URL, if it contained any dots, or, if it was without dots (i.e. it's
just the hostname) then the domain is added to it (with that domain
probably being found by netcfg, from a reverse lookup of your DHCP IP
address).  The 1.0 bit of the path is a version number, which will be
updated to distiguish between versions of d-i that are likely to break
preseed scripts.

<p><em>Boot images should appear over the next couple of days, as I test them.</em> 

<hr>

<p>Be aware that the scripts here depend on customised versions of d-i.
If you're basing significant effort on the current setup, please
mirror all the files (probably with a subversion check-out) so you're
not dependant on me maintaining backwards compatibility</b>

<p>If you find this useful, and have ideas about how to improve it, or would like to contribute your recipes, please get in touch with <a
href="mailto:&#112;&#104;&#105;&#108;&#064;&#104;&#097;&#110;&#100;&#115;&#046;&#099;&#111;&#109;">Philip
Hands</a>

<p>Have Fun!

<p>Cheers, Phil.
